{{ define "main" }}
  <section class="hero">
    <div class="hero-inner">
      <h1>{{ site.Params.brandTitle }}</h1>
      <p>{{ site.Params.brandTagline }}</p>
      <a class="btn btn-primary" href="{{ "/books/" | relURL }}">Browse Books</a>
    </div>
  </section>
  <section class="books-grid">
    <h2 class="section-title">Books</h2>
    <div class="grid">
      {{ with site.GetPage "section" "books" }}
        {{ range .Sections.ByTitle }}
          {{ $book := . }}
          <a class="book-card" href="{{ .RelPermalink }}" style="--cover: {{ or .Params.coverColor site.Params.primaryColor }};">
            <div class="book-card-inner">
              <h3 class="book-title">{{ .Title }}</h3>
              {{ with .Params.author }}<p class="book-author">by {{ . }}</p>{{ end }}
              {{ with .Params.status }}<span class="status status-{{ . }}">{{ . }}</span>{{ end }}
              {{ with .Params.plannedChapters }}
                {{ $count := len $book.Pages }}
                <p class="progress">Chapters: {{ $count }} / {{ . }}</p>
              {{ end }}
            </div>
          </a>
        {{ end }}
      {{ end }}
    </div>
  </section>
{{ end }}
